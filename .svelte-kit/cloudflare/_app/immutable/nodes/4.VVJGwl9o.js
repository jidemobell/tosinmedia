import{t as z,a as f,d as ot}from"../chunks/FqEdNSdB.js";import"../chunks/BQjKAKWr.js";import{p as J,b as K,s as i,c as s,r as e,t as U,i as et,g as t,d as j,m as A,l as it,a as lt}from"../chunks/CuIcymPu.js";import{i as O}from"../chunks/TF1EcFJg.js";import{c as dt,o as at}from"../chunks/UhPjgVww.js";import{s as p,e as L}from"../chunks/CAHhALS2.js";import{e as st,i as rt}from"../chunks/DxNlWU_Q.js";import{a as tt,b as G}from"../chunks/BRARO86z.js";import{p as nt}from"../chunks/BtxDQVFl.js";import{i as B}from"../chunks/C2Y7dR0l.js";var ct=z('<li><button type="button"><span class="icon svelte-1jv1cds"> </span> <span class="name svelte-1jv1cds"> </span></button></li>'),vt=z('<div class="sider svelte-1jv1cds"><div class="sider-header svelte-1jv1cds"><h2>Admin Panel</h2></div> <ul class="sider-menu svelte-1jv1cds"></ul></div>');function ht(y,w){J(w,!1);let l=nt(w,"activeSection",12,"dashboard"),c=nt(w,"sections",24,()=>[{name:"Dashboard",icon:"🏠",id:"dashboard"},{name:"Users",icon:"👤",id:"users"},{name:"Appointments",icon:"📅",id:"appointments"},{name:"Bookings",icon:"📖",id:"bookings"}]);const m=dt(),_=a=>{l(a);const v=c().find(d=>d.id===a);m("sectionChange",{section:v})};O();var o=vt(),r=i(s(o),2);st(r,5,c,rt,(a,v)=>{var d=ct(),h=s(d);let n;var b=s(h),g=s(b,!0);e(b);var k=i(b,2),x=s(k,!0);e(k),e(h),e(d),U(E=>{n=tt(h,1,"svelte-1jv1cds",null,n,E),p(g,t(v).icon),p(x,t(v).name)},[()=>({active:l()===t(v).id})],et),L("click",h,()=>_(t(v).id)),f(a,d)}),e(r),e(o),f(y,o),K()}var mt=z('<tr><td class="svelte-oi0jdi"> </td><td class="svelte-oi0jdi"> </td><td class="svelte-oi0jdi"> </td><td class="svelte-oi0jdi"> </td></tr>'),ut=z('<div class="user-management svelte-oi0jdi"><div class="filters svelte-oi0jdi"><button>All</button> <button>Active</button> <button>Disabled</button></div> <table class="user-table svelte-oi0jdi"><thead><tr><th class="svelte-oi0jdi">Username</th><th class="svelte-oi0jdi">Email</th><th class="svelte-oi0jdi">Status</th><th class="svelte-oi0jdi">Last Updated</th></tr></thead><tbody></tbody></table> <div class="pagination svelte-oi0jdi"><button class="svelte-oi0jdi">Previous</button> <span> </span> <button class="svelte-oi0jdi">Next</button></div></div>');function pt(y,w){J(w,!1);const l=A(),c=A(),m=A();let _=A([]),o=A("all"),r=A(1);const a=20;at(async()=>{try{const u=await fetch("https://tosinpeter-worker.testmobell.workers.dev/api/admin/view-users");if(!u.ok)throw new Error("Failed to fetch users");j(_,await u.json()),console.log("Fetched users:",t(_))}catch(u){console.error("Error fetching users:",u)}});function v(u){j(o,u),j(r,1)}function d(u){u>=1&&u<=t(m)&&j(r,u)}it(()=>(t(_),t(o)),()=>{j(l,t(_).filter(u=>{if(t(o)==="all")return!0;if(t(o)==="active")return u.status==="active";if(t(o)==="disabled")return u.status==="disabled"}))}),it(()=>(t(l),t(r)),()=>{j(c,t(l).slice((t(r)-1)*a,t(r)*a))}),it(()=>t(l),()=>{j(m,Math.ceil(t(l).length/a))}),lt(),O();var h=ut(),n=s(h),b=s(n);let g;var k=i(b,2);let x;var E=i(k,2);let M;e(n);var C=i(n,2),q=i(s(C));st(q,5,()=>t(c),rt,(u,P)=>{var $=mt(),H=s($),Z=s(H,!0);e(H);var V=i(H),S=s(V,!0);e(V);var D=i(V),W=s(D,!0);e(D);var I=i(D),F=s(I,!0);e(I),e($),U(()=>{p(Z,t(P).username),p(S,t(P).email),p(W,t(P).status),p(F,t(P).updated_date)}),f(u,$)}),e(q),e(C);var Q=i(C,2),R=s(Q),N=i(R,2),T=s(N);e(N);var X=i(N,2);e(Q),e(h),U((u,P,$)=>{g=tt(b,1,"svelte-oi0jdi",null,g,u),x=tt(k,1,"svelte-oi0jdi",null,x,P),M=tt(E,1,"svelte-oi0jdi",null,M,$),R.disabled=t(r)===1,p(T,`Page ${t(r)??""} of ${t(m)??""}`),X.disabled=t(r)===t(m)},[()=>({active:t(o)==="all"}),()=>({active:t(o)==="active"}),()=>({active:t(o)==="disabled"})],et),L("click",b,()=>v("all")),L("click",k,()=>v("active")),L("click",E,()=>v("disabled")),L("click",R,()=>d(t(r)-1)),L("click",X,()=>d(t(r)+1)),f(y,h),K()}var _t=z('<tr><td class="svelte-yb5cex"> </td><td class="svelte-yb5cex"> </td><td class="svelte-yb5cex"> </td><td class="svelte-yb5cex"> </td></tr>'),bt=z('<div class="appointment-management svelte-yb5cex"><h1>Appointment Management</h1> <table class="appointment-table svelte-yb5cex"><thead><tr><th class="svelte-yb5cex">Name</th><th class="svelte-yb5cex">Date Created</th><th class="svelte-yb5cex">Reason</th><th class="svelte-yb5cex">Appointment Date</th></tr></thead><tbody></tbody></table></div>');function ft(y,w){J(w,!1);let l=A([]);at(async()=>{try{const r=await fetch("/api/admin/view-appointments");if(!r.ok)throw new Error("Failed to fetch appointments");j(l,await r.json()),console.log("Fetched appointments:",t(l))}catch(r){console.error("Error fetching appointments:",r)}});function c(r){const a=new Date(r);return a.toLocaleDateString()+" "+a.toLocaleTimeString()}O();var m=bt(),_=i(s(m),2),o=i(s(_));st(o,5,()=>t(l),rt,(r,a)=>{var v=_t(),d=s(v),h=s(d,!0);e(d);var n=i(d),b=s(n,!0);e(n);var g=i(n),k=s(g,!0);e(g);var x=i(g),E=s(x,!0);e(x),e(v),U((M,C)=>{p(h,t(a).name),p(b,M),p(k,t(a).reason),p(E,C)},[()=>c(t(a).date_created),()=>c(t(a).appointment_date_selected)],et),f(r,v)}),e(o),e(_),e(m),f(y,m),K()}var wt=z('<a class="link svelte-1z10zwn">Stripe</a>'),zt=z('<a class="link svelte-1z10zwn">Cash</a>'),gt=z('<tr><td class="svelte-1z10zwn"><a class="link svelte-1z10zwn"> </a></td><td class="svelte-1z10zwn"><a class="link svelte-1z10zwn"> </a></td><td class="svelte-1z10zwn"> </td><td class="svelte-1z10zwn"> </td><td class="svelte-1z10zwn"> </td><td class="svelte-1z10zwn"> </td><td class="svelte-1z10zwn"><!></td><td class="svelte-1z10zwn"> </td><td class="svelte-1z10zwn"><a class="link svelte-1z10zwn">View History</a></td></tr>'),yt=z('<div class="booking-management svelte-1z10zwn"><h1>Booking Management</h1> <table class="booking-table svelte-1z10zwn"><thead><tr><th class="svelte-1z10zwn">User</th><th class="svelte-1z10zwn">Event</th><th class="svelte-1z10zwn">Event Date</th><th class="svelte-1z10zwn">Booking Created</th><th class="svelte-1z10zwn">Completed</th><th class="svelte-1z10zwn">Amount</th><th class="svelte-1z10zwn">Payment Medium</th><th class="svelte-1z10zwn">Updated</th><th class="svelte-1z10zwn">History</th></tr></thead><tbody></tbody></table></div>');function xt(y,w){J(w,!1);let l=A([]);at(async()=>{try{const r=await fetch("https://tosinpeter-worker.testmobell.workers.dev/api/admin/view-bookings");if(!r.ok)throw new Error("Failed to fetch bookings");j(l,await r.json()),console.log("Fetched bookings:",t(l))}catch(r){console.error("Error fetching bookings:",r)}});function c(r){const a=new Date(r);return a.toLocaleDateString()+" "+a.toLocaleTimeString()}O();var m=yt(),_=i(s(m),2),o=i(s(_));st(o,5,()=>t(l),rt,(r,a)=>{var v=gt(),d=s(v),h=s(d),n=s(h,!0);e(h),e(d);var b=i(d),g=s(b),k=s(g,!0);e(g),e(b);var x=i(b),E=s(x,!0);e(x);var M=i(x),C=s(M,!0);e(M);var q=i(M),Q=s(q,!0);e(q);var R=i(q),N=s(R);e(R);var T=i(R),X=s(T);{var u=S=>{var D=wt();U(()=>G(D,"href",`/admin/receipts/stripe/${t(a).id}`)),f(S,D)},P=(S,D)=>{{var W=F=>{var Y=zt();U(()=>G(Y,"href",`/admin/receipts/cash/${t(a).id}`)),f(F,Y)},I=F=>{var Y=ot();U(()=>p(Y,t(a).payment_medium)),f(F,Y)};B(S,F=>{t(a).payment_medium==="cash"?F(W):F(I,!1)},D)}};B(X,S=>{t(a).payment_medium==="stripe"?S(u):S(P,!1)})}e(T);var $=i(T),H=s($,!0);e($);var Z=i($),V=s(Z);e(Z),e(v),U((S,D,W)=>{G(h,"href",`/admin/users/${t(a).booking_user}`),p(n,t(a).booking_user),G(g,"href",`/admin/events/${t(a).event_name}`),p(k,t(a).event_name),p(E,S),p(C,D),p(Q,t(a).completed?"Yes":"No"),p(N,`$${t(a).amount??""}`),p(H,W),G(V,"href",`/admin/bookings/history/${t(a).id}`)},[()=>c(t(a).event_date),()=>c(t(a).booking_created),()=>c(t(a).updated)],et),f(r,v)}),e(o),e(_),e(m),f(y,m),K()}var jt=z("<h1>Welcome to the Admin Dashboard</h1>"),kt=z('<div class="dashboard-management svelte-1q38dci"><!> <!> <!> <!></div>');function St(y,w){let l=nt(w,"activeSection",8,"dashboard");var c=kt(),m=s(c);{var _=n=>{pt(n,{})};B(m,n=>{l()==="users"&&n(_)})}var o=i(m,2);{var r=n=>{ft(n,{})};B(o,n=>{l()==="appointments"&&n(r)})}var a=i(o,2);{var v=n=>{xt(n,{})};B(a,n=>{l()==="bookings"&&n(v)})}var d=i(a,2);{var h=n=>{var b=jt();f(n,b)};B(d,n=>{l()==="dashboard"&&n(h)})}e(c),f(y,c)}var Dt=z('<div class="admin-dashboard svelte-12qc28"><header class="dark-header svelte-12qc28"><h1>Admin Dashboard</h1></header> <main class="dashboard-layout svelte-12qc28"><!> <div class="dashboard-content svelte-12qc28"><!></div></main></div>');function Lt(y,w){J(w,!1);async function l(){await(await fetch("/api/admin/view-users")).json(),await(await fetch("/api/admin/view-bookings")).json(),await(await fetch("/api/admin/view-testimonials")).json()}at(l);let c=A("dashboard");function m(d){const{section:h}=d.detail;console.log("Selected Section:",h),j(c,h.id),console.log("Active Section:",t(c))}O();var _=Dt(),o=i(s(_),2),r=s(o);ht(r,{class:"sider",get activeSection(){return t(c)},set activeSection(d){j(c,d)},$$events:{sectionChange:m},$$legacy:!0});var a=i(r,2),v=s(a);St(v,{get activeSection(){return t(c)}}),e(a),e(o),e(_),f(y,_),K()}export{Lt as component};
