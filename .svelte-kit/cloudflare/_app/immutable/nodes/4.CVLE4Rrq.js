import{t as P,a as A}from"../chunks/Df_PLGO5.js";import"../chunks/BWJaVeZx.js";import{z as V,p as W,b as B,s as v,c,r as o,t as O,i as Z,g as t,d as j,m as k,l as z,a as rt}from"../chunks/Dn-Cg2qP.js";import{i as M}from"../chunks/BvRSQFq4.js";import{i as G}from"../chunks/CsMcRiQP.js";import{c as lt,o as I}from"../chunks/DVUgDGkq.js";import{s as y,e as $}from"../chunks/BvUzH-nj.js";import{e as tt,i as et}from"../chunks/C3NhGQ0R.js";import{p as X}from"../chunks/CimEiAtX.js";const Y=[...` 	
\r\f \v\uFEFF`];function ct(h,g,r){var e=h==null?"":""+h;if(r){for(var l in r)if(r[l])e=e?e+" "+l:l;else if(e.length)for(var n=l.length,a=0;(a=e.indexOf(l,a))>=0;){var s=a+n;(a===0||Y.includes(e[a-1]))&&(s===e.length||Y.includes(e[s]))?e=(a===0?"":e.substring(0,a))+e.substring(s+1):a=s}}return e===""?null:e}function E(h,g,r,e,l,n){var a=h.__className;if(V||a!==r||a===void 0){var s=ct(r,e,n);(!V||s!==h.getAttribute("class"))&&(s==null?h.removeAttribute("class"):h.className=s),h.__className=r}else if(n&&l!==n)for(var f in n){var u=!!n[f];(l==null||u!==!!l[f])&&h.classList.toggle(f,u)}return n}var dt=P('<li><button type="button"><span class="icon svelte-1jv1cds"> </span> <span class="name svelte-1jv1cds"> </span></button></li>'),vt=P('<div class="sider svelte-1jv1cds"><div class="sider-header svelte-1jv1cds"><h2>Admin Panel</h2></div> <ul class="sider-menu svelte-1jv1cds"></ul></div>');function ut(h,g){W(g,!1);let r=X(g,"activeSection",12,"dashboard"),e=X(g,"sections",24,()=>[{name:"Dashboard",icon:"🏠",id:"dashboard"},{name:"Users",icon:"👤",id:"users"},{name:"Appointments",icon:"📅",id:"appointments"},{name:"Testimonials",icon:"💬",id:"testimonials"}]);const l=lt(),n=f=>{r(f);const u=e().find(b=>b.id===f);l("sectionChange",{section:u})};G();var a=vt(),s=v(c(a),2);tt(s,5,e,et,(f,u)=>{var b=dt(),p=c(b);let w;var _=c(p),D=c(_,!0);o(_);var S=v(_,2),R=c(S,!0);o(S),o(p),o(b),O(i=>{w=E(p,1,"svelte-1jv1cds",null,w,i),y(D,t(u).icon),y(R,t(u).name)},[()=>({active:r()===t(u).id})],Z),$("click",p,()=>n(t(u).id)),A(f,b)}),o(s),o(a),A(h,a),B()}var ht=P('<tr><td class="svelte-oi0jdi"> </td><td class="svelte-oi0jdi"> </td><td class="svelte-oi0jdi"> </td><td class="svelte-oi0jdi"> </td></tr>'),ft=P('<div class="user-management svelte-oi0jdi"><div class="filters svelte-oi0jdi"><button>All</button> <button>Active</button> <button>Disabled</button></div> <table class="user-table svelte-oi0jdi"><thead><tr><th class="svelte-oi0jdi">Username</th><th class="svelte-oi0jdi">Email</th><th class="svelte-oi0jdi">Status</th><th class="svelte-oi0jdi">Last Updated</th></tr></thead><tbody></tbody></table> <div class="pagination svelte-oi0jdi"><button class="svelte-oi0jdi">Previous</button> <span> </span> <button class="svelte-oi0jdi">Next</button></div></div>');function mt(h,g){W(g,!1);const r=k(),e=k(),l=k();let n=k([]),a=k("all"),s=k(1);const f=20;I(async()=>{try{const d=await fetch("https://tosinpeter-worker.testmobell.workers.dev/api/admin/view-users");if(!d.ok)throw new Error("Failed to fetch users");j(n,await d.json()),console.log("Fetched users:",t(n))}catch(d){console.error("Error fetching users:",d)}});function u(d){j(a,d),j(s,1)}function b(d){d>=1&&d<=t(l)&&j(s,d)}z(()=>(t(n),t(a)),()=>{j(r,t(n).filter(d=>{if(t(a)==="all")return!0;if(t(a)==="active")return d.status==="active";if(t(a)==="disabled")return d.status==="disabled"}))}),z(()=>(t(r),t(s)),()=>{j(e,t(r).slice((t(s)-1)*f,t(s)*f))}),z(()=>t(r),()=>{j(l,Math.ceil(t(r).length/f))}),rt(),G();var p=ft(),w=c(p),_=c(w);let D;var S=v(_,2);let R;var i=v(S,2);let m;o(w);var x=v(w,2),H=v(c(x));tt(H,5,()=>t(e),et,(d,U)=>{var q=ht(),C=c(q),st=c(C,!0);o(C);var T=v(C),it=c(T,!0);o(T);var L=v(T),ot=c(L,!0);o(L);var Q=v(L),nt=c(Q,!0);o(Q),o(q),O(()=>{y(st,t(U).username),y(it,t(U).email),y(ot,t(U).status),y(nt,t(U).updated_date)}),A(d,q)}),o(H),o(x);var J=v(x,2),F=c(J),N=v(F,2),at=c(N);o(N);var K=v(N,2);o(J),o(p),O((d,U,q)=>{D=E(_,1,"svelte-oi0jdi",null,D,d),R=E(S,1,"svelte-oi0jdi",null,R,U),m=E(i,1,"svelte-oi0jdi",null,m,q),F.disabled=t(s)===1,y(at,`Page ${t(s)??""} of ${t(l)??""}`),K.disabled=t(s)===t(l)},[()=>({active:t(a)==="all"}),()=>({active:t(a)==="active"}),()=>({active:t(a)==="disabled"})],Z),$("click",_,()=>u("all")),$("click",S,()=>u("active")),$("click",i,()=>u("disabled")),$("click",F,()=>b(t(s)-1)),$("click",K,()=>b(t(s)+1)),A(h,p),B()}var pt=P("<h1>Welcome to the Admin Dashboard</h1>"),bt=P("<h1>Manage Appointments</h1>"),_t=P("<h1>Manage Testimonials</h1>"),gt=P('<div class="admin-dashboard svelte-12qc28"><header class="dark-header svelte-12qc28"><h1>Admin Dashboard</h1></header> <main class="dashboard-layout svelte-12qc28"><!> <div class="dashboard-content svelte-12qc28"><!> <!> <!> <!></div></main></div>');function Ut(h,g){W(g,!1);async function r(){await(await fetch("/api/admin/view-users")).json(),await(await fetch("/api/admin/view-bookings")).json(),await(await fetch("/api/admin/view-testimonials")).json()}I(r);let e=k("dashboard");function l(i){const{section:m}=i.detail;console.log("Selected Section:",m),j(e,m.id)}G();var n=gt(),a=v(c(n),2),s=c(a);ut(s,{class:"sider",get activeSection(){return t(e)},set activeSection(i){j(e,i)},$$events:{sectionChange:l},$$legacy:!0});var f=v(s,2),u=c(f);{var b=i=>{var m=pt();A(i,m)};M(u,i=>{t(e)==="dashboard"&&i(b)})}var p=v(u,2);{var w=i=>{mt(i,{})};M(p,i=>{t(e)==="users"&&i(w)})}var _=v(p,2);{var D=i=>{var m=bt();A(i,m)};M(_,i=>{t(e)==="appointments"&&i(D)})}var S=v(_,2);{var R=i=>{var m=_t();A(i,m)};M(S,i=>{t(e)==="testimonials"&&i(R)})}o(f),o(a),o(n),A(h,n),B()}export{Ut as component};
